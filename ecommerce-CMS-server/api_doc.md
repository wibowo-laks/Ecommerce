# Ecomerce CMS Server
This app has : 
* RESTful endpoint for Ecomerce CMS Server
* JSON formatted response

&nbsp;

## Endpoints for User
### login for admin
### POST /login

> Post User Login

_Request Body_
```
{
    "email": "admin@mail.com",
    "password": "admin"
}
```

_Response (200 - OK)_
```
{
    "access_token": "<generated by system>"
}
```
_Response (400 Bad) Request_
```
{
    "message": [
        "email is required",
        "email not valid",
        "password is required",
        "Password minimum 4 characters"
    ]
}
```

_Response (401 Bad - Unautorized)_
```
{
  "message": "invalid email / password"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
### register for new customer
### POST /customer/register

> Post User Register

_Request Body_
```
{
  "email": "tes@mail.com",
  "password": "123456"
}
```

_Response (201 - OK)_
```
{
    "id": 1,
    "email": "mail@mail.com"
    "role": "customer"
}
```
_Response (400 Bad) Request_
```
{
    "message": [
      "Email must be filled",
      "Email must be unique",
      "Email not valid",
      "Password must be filled",
      "Password minimum 4 characters"
    ]
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
## Endpoints for Products
### GET /products

> Get all task list

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```
[
  {
    "id": 6,
    "name": "adidas",
    "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
    "price": 260000,
    "stock": 4,
    "CategoryId": 2,
    "createdAt": "2021-02-21T08:36:42.345Z",
    "updatedAt": "2021-02-21T08:36:42.345Z",
    "Category": {
      "id": 2,
      "name": "sepatu",
      "createdAt": "2021-02-21T08:36:28.451Z",
      "updatedAt": "2021-02-21T08:36:28.451Z"
    }
  },
  {
    "id": 7,
    "name": "nike",
    "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
    "price": 260000,
    "stock": 4,
    "CategoryId": 2,
    "createdAt": "2021-02-21T08:36:50.628Z",
    "updatedAt": "2021-02-21T08:36:50.628Z",
    "Category": {
      "id": 2,
      "name": "sepatu",
      "createdAt": "2021-02-21T08:36:28.451Z",
      "updatedAt": "2021-02-21T08:36:28.451Z"
    }
  }
]
```
_Response (401 - Bad Request)_
```
{
  "message": "Authorization Invalid"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### POST /products

> Create new task

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
{
  "name": "nike",
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
  "price": "260000",
  "stock": "4",
  "CategoryId": "2"
}
```

_Response (201 - Created)_
```
{
  "name": "nike",
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
  "price": "260000",
  "stock": "4",
  "CategoryId": "2"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
    "Name must be filled",
    "Image url must be filled",
    "Price must be filled",
    "Price must be filled by number",
    "Price must greater than equal 0",
    "Stock must greater than equal 0",
    "Stock must be filled",
    "Stock must be filled by absolute number",
    "Category must be filled"
  ]
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "Authorization Invalid"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### GET /products/:id

> Get task by id

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```

_Response (200 - OK)_
```
{
  "id": 6,
  "name": "adidas",
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
  "price": 260000,
  "stock": 4,
  "CategoryId": 2,
  "createdAt": "2021-02-21T08:36:42.345Z",
  "updatedAt": "2021-02-21T08:36:42.345Z",
  "Category": {
    "id": 2,
    "name": "sepatu",
    "createdAt": "2021-02-21T08:36:28.451Z",
    "updatedAt": "2021-02-21T08:36:28.451Z"
  }
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "User not authorized"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### PUT /products/:id

> Edit task value

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
{
  "id": 6,
  "name": "nike2",
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
  "price": 260000,
  "stock": 4,
  "CategoryId": 1
}
```

_Response (200 - OK)_
```
{
  "id": 6,
  "name": "nike2",
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
  "price": 260000,
  "stock": 4,
  "CategoryId": 1,
  "createdAt": "2021-02-21T08:36:42.345Z",
  "updatedAt": "2021-02-21T08:47:36.277Z"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "Authorization Invalid"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
    "Name must be filled",
    "Image url must be filled",
    "Price must be filled",
    "Price must be filled by number",
    "Price must greater than equal 0",
    "Stock must greater than equal 0",
    "Stock must be filled",
    "Stock must be filled by absolute number",
    "Category must be filled"
  ]
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### DELETE /products/:id

> Delete task

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
not needed
```

_Response (200 - OK)_
```
{
  message: "Success delete product"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "Authorization Invalid"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
## Endpoints for Category
### GET /categories

> Get all categories list

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```
[
  {
    "id": 1,
    "name": "baju",
    "createdAt": "2021-02-21T08:36:13.103Z",
    "updatedAt": "2021-02-21T08:36:13.103Z",
    "Products": [
      {
        "id": 6,
        "name": "nike2",
        "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
        "price": 260000,
        "stock": 4,
        "CategoryId": 1,
        "createdAt": "2021-02-21T08:36:42.345Z",
        "updatedAt": "2021-02-21T08:47:36.277Z"
      }
    ]
  },
  {
    "id": 2,
    "name": "sepatu",
    "createdAt": "2021-02-21T08:36:28.451Z",
    "updatedAt": "2021-02-21T08:36:28.451Z",
    "Products": [
      {
        "id": 7,
        "name": "nike",
        "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
        "price": 260000,
        "stock": 4,
        "CategoryId": 2,
        "createdAt": "2021-02-21T08:36:50.628Z",
        "updatedAt": "2021-02-21T08:36:50.628Z"
      }
    ]
  }
]
```
_Response (401 - Bad Request)_
```
{
  "message": "Authorization Invalid"
}
```

_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
### GET /customer/categories/:id

> Get all categories list

_Request Headers_
```
not needed
```
_Request Params_
```
id = [integer]
```
_Request Body_
```
not needed
```

_Response (200 - OK)_
```
{
  "id": 1,
  "name": "sepatu",
  "createdAt": "2021-02-25T04:35:52.020Z",
  "updatedAt": "2021-02-25T04:35:52.020Z",
  "Products": [
    {
      "id": 1,
      "name": "adidas",
      "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
      "price": 200000,
      "stock": 4,
      "CategoryId": 1,
      "createdAt": "2021-02-25T04:36:52.319Z",
      "updatedAt": "2021-02-25T04:36:52.319Z"
    }
  ]
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```

_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### POST /categories

> Create new category

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
{
  "name": "Sepatu"
}
```

_Response (201 - Created)_
```
{
  "id": 2,
  "name": "Sepatu",
  "updatedAt": "2021-02-21T08:36:28.451Z",
  "createdAt": "2021-02-21T08:36:28.451Z"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
    "name must be filled",
    "name must be unique"
  ]
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### DELETE /categories/:id

> Delete task

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
not needed
```

_Response (200 - OK)_
```
{
  "message": "Success delete category"
}
```
_Response (401 - Bad Request)_
```
{
  "message": "Authorization Invalid"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
## Endpoints for Banner
### GET /banners

> Get all banners list

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```
[
  {
  "id": 2,
  "title": "Banner 1",
  "status": true,
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613856211/Adidas_NMD_R1.jpg",
  "updatedAt": "2021-02-21T09:17:55.945Z",
  "createdAt": "2021-02-21T09:17:55.945Z"
  },
  {
  "id": 3,
  "title": "Banner 2",
  "status": true,
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613856211/Adidas_NMD_R1.jpg",
  "updatedAt": "2021-02-21T09:17:57.832Z",
  "createdAt": "2021-02-21T09:17:57.843Z"
  }
]
```
_Response (401 - Bad Request)_
```
{
  "message": "Authorization Invalid"
}
```

_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### GET /customer/banners

> Get all banners list

_Request Headers_
```
not needed
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```
[
  {
  "id": 2,
  "title": "Banner 1",
  "status": true,
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613856211/Adidas_NMD_R1.jpg",
  "updatedAt": "2021-02-21T09:17:55.945Z",
  "createdAt": "2021-02-21T09:17:55.945Z"
  },
  {
  "id": 3,
  "title": "Banner 2",
  "status": true,
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613856211/Adidas_NMD_R1.jpg",
  "updatedAt": "2021-02-21T09:17:57.832Z",
  "createdAt": "2021-02-21T09:17:57.843Z"
  }
]
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### POST /banners

> Create new banner

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
{
  "title": "Banner 2",
  "status": true,
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg"
}
```

_Response (201 - Created)_
```
{
  "id": 2,
  "title": "Banner 1",
  "status": true,
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613856211/Adidas_NMD_R1.jpg",
  "updatedAt": "2021-02-21T09:17:55.945Z",
  "createdAt": "2021-02-21T09:17:55.945Z"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
    "Status must be filled by true/false",
    "Title must be filled",
    "Status must be filled",
    "Image url must be filled"
  ]
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### PATCH /banners/:id

> Edit banner status

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
{
  "status": "false",
}
```

_Response (200 - OK)_
```
{
  "id": 2,
  "title": "Banner 1",
  "status": false,
  "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613856211/Adidas_NMD_R1.jpg",
  "updatedAt": "2021-02-21T09:17:59.354Z",
  "createdAt": "2021-02-21T09:17:55.945Z"
}
```
_Response (400 - Bad Request)_
```
{
  "message": [
    "Status must be filled by true/false",
    "Status must be filled"
  ]
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "Authorization Invalid"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### DELETE /banners/:id

> Delete banner

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
not needed
```

_Response (200 - OK)_
```
{
  message: "Success delete banner"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "Authorization Invalid"
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
## Endpoints for Carts
### GET /carts

> Get all carts list

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Body_
```
not needed
```

_Response (200 - OK)_
```
[
  {
    "id": 1,
    "UserId": 2,
    "ProductId": 1,
    "quantity": 1,
    "checkout": false,
    "createdAt": "2021-02-25T04:43:59.849Z",
    "updatedAt": "2021-02-25T04:43:59.849Z",
    "Product": {
      "id": 1,
      "name": "adidas",
      "image_url": "https://res.cloudinary.com/dv2hwbawa/image/upload/v1613878307/NIKE0538.jpg",
      "price": 200000,
      "stock": 4,
      "CategoryId": 1,
      "createdAt": "2021-02-25T04:36:52.319Z",
      "updatedAt": "2021-02-25T04:36:52.319Z"
    }
  }
]
```
_Response (401 - Bad Request)_
```
{
  "message": "Authorization Invalid"
}
```
---
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### POST /carts

> Add new carts

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```
_Request Body_
```
{
  "productId": 1,
  "quantity": 1
}
```
If this cart doesn't exists or this cart already exists but checkout is true, this request will be create a new cart
_Response (201 - Created)_
```
{
  "checkout": false,
  "id": 1,
  "ProductId": 1,
  "UserId": 2,
  "quantity": 1,
  "updatedAt": "2021-02-25T04:51:38.088Z",
  "createdAt": "2021-02-25T04:51:38.088Z"
}
```
If this cart already exists and checkout is false, this request will be update the cart
_Response (200 - Ok)_
```
{
  "id": 1,
  "UserId": 2,
  "ProductId": 1,
  "quantity": 2,
  "checkout": false,
  "createdAt": "2021-02-25T04:43:59.849Z",
  "updatedAt": "2021-02-25T05:08:53.080Z"
}
```
_Response (400 - Bad Request)_
```
{
  "message": [
    "Quantity minimum is 1",
    "Not enough stock"
  ]
}
```
_Response (401 - Bad Request)_
```
{
  "message": "Authorization Invalid"
}
```
---
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---
### PATCH /carts/:id

> Edit task value

_Request Headers_
```
{
  "access_token": "<user access token>"
}
```

_Request Params_
```
id = [integer]
```
_Request Body_
```
{
  "quantity": 1,
}
```

_Response (200 - OK)_
```
{
  "id": 209,
  "UserId": 3,
  "ProductId": 18,
  "quantity": 4,
  "checkout": false,
  "createdAt": "2021-01-28T02:12:06.121Z",
  "updatedAt": "2021-01-28T02:31:39.372Z"
}
```
_Response (401 - Unauthorized)_
```
{
  "message": "Authorization Invalid"
}
```

_Response (400 - Bad Request)_
```
{
  "message": [
    "Not enough stock"
  ]
}
```
_Response (404 - Not Found)_
```
{
  "message": "Data not found"
}
```
_Response (500 - Bad Request)_
```
{
  "message": "Internal Server Error"
}
```
---